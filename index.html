<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>90 Day Habit Tracker</title>

<style>
body {
    margin: 0;
    background: linear-gradient(135deg, #667eea, #764ba2);
    font-family: 'Segoe UI', sans-serif;
}

.container {
    padding: 20px;
    max-width: 420px;
    margin: auto;
}

.card {
    background: #fff;
    border-radius: 20px;
    padding: 22px;
    box-shadow: 0 12px 28px rgba(0,0,0,0.25);
}

h2 {
    text-align: center;
    margin-bottom: 6px;
}

.date {
    text-align: center;
    color: #555;
}

.status {
    text-align: center;
    font-weight: bold;
    margin-top: 6px;
}

.activities {
    text-align: center;
    font-size: 14px;
    color: #444;
    margin-bottom: 20px;
}

.habit {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    margin-bottom: 14px;
    border-radius: 14px;
    background: #f3f4f6;
    font-size: 18px;
}

input[type="checkbox"] {
    width: 26px;
    height: 26px;
}

button {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    border: none;
    border-radius: 14px;
    cursor: pointer;
}

.save-btn {
    background: #6b82ee;
    color: white;
}

.reset-btn {
    background: #ef4444;
    color: white;
    margin-top: 10px;
}

.stats {
    margin-top: 18px;
    text-align: center;
}

.progress-bar {
    background: #e5e7eb;
    height: 14px;
    border-radius: 10px;
    overflow: hidden;
    margin-top: 8px;
}

.progress {
    height: 100%;
    background: linear-gradient(90deg, #34d399, #10b981);
    width: 0%;
}

.streak {
    margin-top: 10px;
    font-weight: bold;
    color: #10b981;
}
</style>
</head>

<body>
<div class="container">
<div class="card">

<h2>90-Day Habit Tracker</h2>
<div class="date" id="today"></div>
<div class="status" id="status"></div>
<div class="activities" id="activities"></div>

<div class="habit">
    üö∂ Walking
    <input type="checkbox" id="walk">
</div>

<div class="habit">
    üçî No Outside Food
    <input type="checkbox" id="food">
</div>

<button class="save-btn" id="saveBtn">Save Today</button>
<button class="reset-btn" id="resetBtn">Reset Tracker</button>

<div class="stats">
    <div id="count"></div>
    <div class="progress-bar">
        <div class="progress" id="bar"></div>
    </div>
    <div class="streak" id="streak"></div>
</div>

</div>
</div>

<script>
const TOTAL_DAYS = 90;
const STORAGE_KEY = "habit90Data";
const todayKey = new Date().toISOString().split("T")[0];

// Elements
const walkEl = document.getElementById("walk");
const foodEl = document.getElementById("food");
const statusEl = document.getElementById("status");
const activitiesEl = document.getElementById("activities");
const countEl = document.getElementById("count");
const barEl = document.getElementById("bar");
const streakEl = document.getElementById("streak");
const saveBtn = document.getElementById("saveBtn");
const resetBtn = document.getElementById("resetBtn");

document.getElementById("today").innerText = new Date().toDateString();

let data = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};

// Load today's values
if (data[todayKey]) {
    walkEl.checked = data[todayKey].walk;
    foodEl.checked = data[todayKey].food;
}

saveBtn.addEventListener("click", saveToday);
resetBtn.addEventListener("click", resetTracker);

function saveToday() {
    data[todayKey] = {
        walk: walkEl.checked,
        food: foodEl.checked
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    updateUI();
    alert("Saved ‚úÖ");
}

function resetTracker() {
    if (confirm("‚ö†Ô∏è This will erase all progress. Continue?")) {
        localStorage.removeItem(STORAGE_KEY);
        data = {};
        walkEl.checked = false;
        foodEl.checked = false;
        updateUI();
        alert("Tracker reset üîÑ");
    }
}

function updateUI() {
    const todayData = data[todayKey];
    const dayCompleted = todayData && todayData.walk && todayData.food;

    if (dayCompleted) {
        statusEl.innerText = "Status: ‚úÖ Day Completed";
        statusEl.style.color = "#10b981";
        activitiesEl.innerText = "Activities: üö∂ Walking, üçî No Outside Food";
    } else {
        statusEl.innerText = "Status: ‚ùå Day Not Completed";
        statusEl.style.color = "#ef4444";
        activitiesEl.innerText = "Activities: Both required";
    }

    // Count ONLY fully completed days
    const completedDays = Object.values(data)
        .filter(d => d.walk && d.food).length;

    countEl.innerText = `Completed ${completedDays} / ${TOTAL_DAYS} days`;
    barEl.style.width = (completedDays / TOTAL_DAYS * 100) + "%";

    streakEl.innerText = `üî• Streak: ${getStreak()} days`;
}

// STRICT streak logic: BOTH activities required
function getStreak() {
    let d = new Date();
    let streak = 0;

    while (true) {
        const key = d.toISOString().split("T")[0];
        const day = data[key];

        if (day && day.walk && day.food) {
            streak++;
            d.setDate(d.getDate() - 1);
        } else {
            break; // streak broken
        }
    }
    return streak;
}

updateUI();
</script>

</body>
</html>
